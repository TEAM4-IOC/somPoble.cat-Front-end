<div class="component-wrapper">
  <div class="auth-container">
    <h1>SomPoble</h1>
    <h2>{{ 'edit_profile.edit_title' | translate }}</h2>
    <div class="read-only-data">
      <div class="data-field">
        <label>{{ 'register.dni_label' | translate }}:</label>
        <span>{{ profile.dni }}</span>
      </div>
      <div class="data-field">
        <label>{{ 'register.nombre_label' | translate }}:</label>
        @if (!editingField('nombre')) {
          <span>{{ profile.nombre }}</span>
          <button class="icon-btn" (click)="startEditing('nombre', profile.nombre)">
            <i class="fas fa-edit"></i>
          </button>
        } @else {
          <input type="text" [(ngModel)]="tempValue" name="nombre" required minlength="2" placeholder="{{ 'register.nombre_placeholder' | translate }}" #nombreModel="ngModel" />
          @if (nombreModel.invalid && (nombreModel.touched || nombreModel.dirty)) {
            <div class="error">{{ 'register.nombre_required' | translate }}</div>
          }
          <button class="icon-btn" (click)="confirmEditing('nombre')">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" (click)="cancelEditing()">
            <i class="fas fa-times"></i>
          </button>
        }
      </div>
      <div class="data-field">
        <label>{{ 'register.apellidos_label' | translate }}:</label>
        @if (!editingField('apellidos')) {
          <span>{{ profile.apellidos }}</span>
          <button class="icon-btn" (click)="startEditing('apellidos', profile.apellidos)">
            <i class="fas fa-edit"></i>
          </button>
        } @else {
          <input type="text" [(ngModel)]="tempValue" name="apellidos" required minlength="2" placeholder="{{ 'register.apellidos_placeholder' | translate }}" #apellidosModel="ngModel" />
          @if (apellidosModel.invalid && (apellidosModel.touched || apellidosModel.dirty)) {
            <div class="error">{{ 'register.apellidos_required' | translate }}</div>
          }
          <button class="icon-btn" (click)="confirmEditing('apellidos')">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" (click)="cancelEditing()">
            <i class="fas fa-times"></i>
          </button>
        }
      </div>
      <div class="data-field">
        <label>{{ 'register.email_label' | translate }}:</label>
        @if (!editingField('email')) {
          <span>{{ profile.email }}</span>
          <button class="icon-btn" (click)="startEditing('email', profile.email)">
            <i class="fas fa-edit"></i>
          </button>
        } @else {
          <input type="email" [(ngModel)]="tempValue" name="email" required placeholder="{{ 'register.email_placeholder' | translate }}" #emailModel="ngModel" />
          @if (emailModel.invalid && (emailModel.touched || emailModel.dirty)) {
            <div class="error">{{ 'register.email_required' | translate }}</div>
          }
          <button class="icon-btn" (click)="confirmEditing('email')">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" (click)="cancelEditing()">
            <i class="fas fa-times"></i>
          </button>
        }
      </div>
      <div class="data-field">
        <label>{{ 'register.telefono_label' | translate }}:</label>
        @if (!editingField('telefono')) {
          <span>{{ profile.telefono }}</span>
          <button class="icon-btn" (click)="startEditing('telefono', profile.telefono)">
            <i class="fas fa-edit"></i>
          </button>
        } @else {
          <input type="text" [(ngModel)]="tempValue" name="telefono" required pattern="[0-9]{9}" placeholder="{{ 'register.telefono_placeholder' | translate }}" #telefonoModel="ngModel" />
          @if (telefonoModel.invalid && (telefonoModel.touched || telefonoModel.dirty)) {
            <div class="error">{{ 'register.telefono_required' | translate }}</div>
          }
          <button class="icon-btn" (click)="confirmEditing('telefono')">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" (click)="cancelEditing()">
            <i class="fas fa-times"></i>
          </button>
        }
      </div>
    </div>
    @if (errorMessage) {
      <div class="error">{{ errorMessage }}</div>
    }
    @if (successMessage) {
      <div class="success">{{ successMessage }}</div>
    }
  </div>
</div>
