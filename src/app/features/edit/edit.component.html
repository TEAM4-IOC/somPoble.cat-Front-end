<div class="component-wrapper">
  <div class="auth-container">
    <h1>SomPoble</h1>
    <h2>{{ 'edit_profile.edit_title' | translate }}</h2>
    <div class="read-only-data">
      <div class="data-field">
        <label>{{ 'register.dni_label' | translate }}:</label>
        <span>{{ profile.dni }}</span>
      </div>
      <div class="data-field">
        <label>{{ 'register.nombre_label' | translate }}:</label>
        <ng-container *ngIf="!editingField('nombre'); else editNombre">
          <span>{{ profile.nombre }}</span>
          <button class="icon-btn" (click)="startEditing('nombre', profile.nombre)">
            <i class="fas fa-edit"></i>
          </button>
        </ng-container>
        <ng-template #editNombre>
          <input type="text" [(ngModel)]="tempValue" name="nombre" required minlength="2" placeholder="{{ 'register.nombre_placeholder' | translate }}" #nombreModel="ngModel" />
          <div class="error" *ngIf="nombreModel.invalid && (nombreModel.touched || nombreModel.dirty)">
            {{ 'register.nombre_required' | translate }}
          </div>
          <button class="icon-btn" (click)="confirmEditing('nombre')">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" (click)="cancelEditing()">
            <i class="fas fa-times"></i>
          </button>
        </ng-template>
      </div>
      <div class="data-field">
        <label>{{ 'register.apellidos_label' | translate }}:</label>
        <ng-container *ngIf="!editingField('apellidos'); else editApellidos">
          <span>{{ profile.apellidos }}</span>
          <button class="icon-btn" (click)="startEditing('apellidos', profile.apellidos)">
            <i class="fas fa-edit"></i>
          </button>
        </ng-container>
        <ng-template #editApellidos>
          <input type="text" [(ngModel)]="tempValue" name="apellidos" required minlength="2" placeholder="{{ 'register.apellidos_placeholder' | translate }}" #apellidosModel="ngModel" />
          <div class="error" *ngIf="apellidosModel.invalid && (apellidosModel.touched || apellidosModel.dirty)">
            {{ 'register.apellidos_required' | translate }}
          </div>
          <button class="icon-btn" (click)="confirmEditing('apellidos')">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" (click)="cancelEditing()">
            <i class="fas fa-times"></i>
          </button>
        </ng-template>
      </div>
      <div class="data-field">
        <label>{{ 'register.email_label' | translate }}:</label>
        <ng-container *ngIf="!editingField('email'); else editEmail">
          <span>{{ profile.email }}</span>
          <button class="icon-btn" (click)="startEditing('email', profile.email)">
            <i class="fas fa-edit"></i>
          </button>
        </ng-container>
        <ng-template #editEmail>
          <input type="email" [(ngModel)]="tempValue" name="email" required placeholder="{{ 'register.email_placeholder' | translate }}" #emailModel="ngModel" />
          <div class="error" *ngIf="emailModel.invalid && (emailModel.touched || emailModel.dirty)">
            {{ 'register.email_required' | translate }}
          </div>
          <button class="icon-btn" (click)="confirmEditing('email')">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" (click)="cancelEditing()">
            <i class="fas fa-times"></i>
          </button>
        </ng-template>
      </div>
      <div class="data-field">
        <label>{{ 'register.telefono_label' | translate }}:</label>
        <ng-container *ngIf="!editingField('telefono'); else editTelefono">
          <span>{{ profile.telefono }}</span>
          <button class="icon-btn" (click)="startEditing('telefono', profile.telefono)">
            <i class="fas fa-edit"></i>
          </button>
        </ng-container>
        <ng-template #editTelefono>
          <input type="text" [(ngModel)]="tempValue" name="telefono" required pattern="[0-9]{9}" placeholder="{{ 'register.telefono_placeholder' | translate }}" #telefonoModel="ngModel" />
          <div class="error" *ngIf="telefonoModel.invalid && (telefonoModel.touched || telefonoModel.dirty)">
            {{ 'register.telefono_required' | translate }}
          </div>
          <button class="icon-btn" (click)="confirmEditing('telefono')">
            <i class="fas fa-check"></i>
          </button>
          <button class="icon-btn" (click)="cancelEditing()">
            <i class="fas fa-times"></i>
          </button>
        </ng-template>
      </div>
    </div>
    <div class="error" *ngIf="errorMessage">{{ errorMessage }}</div>
    <div class="success" *ngIf="successMessage">{{ successMessage }}</div>
  </div>
</div>
